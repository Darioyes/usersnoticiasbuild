import{b as q,c as s,d as A,e as G,f as I,g as x,h as j,i as B,j as R,k as $,l as z,m as L}from"./chunk-OEDXWUF3.js";import{a as U}from"./chunk-T3JMRARM.js";import{a as N}from"./chunk-4LWUVTOG.js";import{c as T}from"./chunk-PT246GS5.js";import{a as E}from"./chunk-UZIZ2SC3.js";import{a as V}from"./chunk-5AEEOLU3.js";import"./chunk-IFK5JYCE.js";import"./chunk-OCIR5Z6U.js";import"./chunk-SFNPABOD.js";import"./chunk-RDI242HM.js";import{Bb as O,Cb as k,Ea as a,Oa as D,W as c,Wa as u,Xa as F,Za as w,_ as P,ab as _,db as p,eb as C,fb as h,gb as g,ha as b,hb as o,ia as S,ib as n,jb as d,kb as y,qb as M,rb as f,xb as m,yb as v}from"./chunk-A2AZSFLI.js";var H=()=>[import("./chunk-CXOYTFUN.js").then(e=>e.TitlePrincipalComponent),j,q,A,G,$,B,R,import("./chunk-OOLKEDMA.js").then(e=>e.NgClass)],J=e=>({"btn-success":e});function K(e,i){e&1&&(o(0,"p",9),m(1,"El nombre es obligatorio"),n())}function Q(e,i){if(e&1&&(o(0,"p",9),m(1),n()),e&2){let t=i.$implicit;a(),v(t)}}function W(e,i){if(e&1&&h(0,Q,2,1,"p",9,C),e&2){let t,r=f(2);g((t=r.errorUser().errorNews)==null||t.errors==null?null:t.errors.name)}}function X(e,i){e&1&&(o(0,"p",9),m(1,"El apellido es obligatorio"),n())}function Y(e,i){e&1&&(o(0,"p",9),m(1,"El campo apellido es obligatorio."),n())}function Z(e,i){if(e&1&&(o(0,"p",9),m(1),n()),e&2){let t=f().$implicit;a(),v(t)}}function ee(e,i){if(e&1&&u(0,Y,2,0,"p",9)(1,Z,2,1,"p",9),e&2){let t=i.$implicit;p(t==="El campo lastname es obligatorio."?0:1)}}function te(e,i){if(e&1&&h(0,ee,2,1,null,null,C),e&2){let t,r=f(2);g((t=r.errorUser().errorNews)==null||t.errors==null?null:t.errors.lastname)}}function ie(e,i){if(e&1){let t=y();o(0,"div",0)(1,"div",1),d(2,"app-title-principal",2),n(),o(3,"div",3)(4,"form",4),M("submit",function(){b(t);let l=f();return S(l.updateDataUser())}),d(5,"input",5),o(6,"div",6)(7,"label",7),m(8,"Nombre"),n(),d(9,"input",8),u(10,K,2,0,"p",9)(11,W,2,0),n(),o(12,"div",6)(13,"label",10),m(14,"Apellido"),n(),d(15,"input",11),u(16,X,2,0,"p",9)(17,te,2,0),n(),o(18,"div",6)(19,"button",12),m(20,"Modificar"),n()()()()()}if(e&2){let t=f();a(2),_("title","T\xFA perfil "+t.nameUser),a(2),_("formGroup",t.editProfileForm),a(6),p(!(t.name==null||t.name.errors==null)&&t.name.errors.required&&(t.name!=null&&t.name.touched)?10:-1),a(),p(t.errorUser()?11:-1),a(5),p(!(t.lastname==null||t.lastname.errors==null)&&t.lastname.errors.required&&(t.lastname!=null&&t.lastname.touched)?16:-1),a(),p(t.errorUser()?17:-1),a(2),_("ngClass",k(8,J,t.editProfileForm.valid))("disabled",t.editProfileForm.invalid)}}function ne(e,i){e&1&&d(0,"app-spiner")}var _e=(()=>{let i=class i{constructor(){this.userService=c(U),this.cookieService=c(E),this.alertsService=c(N),this.router=c(T),this.nameUser=this.cookieService.get("name"),this.errorUser=D({}),this.formbuilder=c(z),this.editProfileForm=new I({id:new x(""),name:new x(""),lastname:new x("")}),this.editProfileForm=this.formbuilder.group({id:["",s.compose([s.required])],name:["",s.compose([s.required])],lastname:["",s.compose([s.required])]}),this.SetCookeis()}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.unsubscribe()}get id(){return this.editProfileForm.get("id")}get name(){return this.editProfileForm.get("name")}get lastname(){return this.editProfileForm.get("lastname")}updateDataUser(){this.editProfileForm.valid&&(this.unsubscribe=this.userService.updateUser(this.editProfileForm.value,this.id?.value).subscribe({next:r=>{let l=new Date;l.setDate(l.getDate()+30),this.cookieService.delete("name"),this.cookieService.delete("lastname"),this.cookieService.set("name",r.data.name,l,"/",void 0,!0,"Strict"),this.cookieService.set("lastname",r.data.lastname,l,"/",void 0,!0,"Strict"),this.alertsService.showAlert("success","Datos modificados correctamente"),this.router.navigateByUrl("/")},error:r=>{this.errorUser.set(r)}}))}SetCookeis(){this.id?.setValue(this.cookieService.get("id")),this.name?.setValue(this.cookieService.get("name")),this.lastname?.setValue(this.cookieService.get("lastname"))}};i.\u0275fac=function(l){return new(l||i)},i.\u0275cmp=P({type:i,selectors:[["app-profile"]],standalone:!0,features:[O],decls:4,vars:0,consts:[[1,"conteiner-profile"],[1,"conteiner-profile__title"],[3,"title"],[1,"conteiner-profile__form"],[3,"submit","formGroup"],["formControlName","id","type","hidden","id","id","name","id"],[1,"conteiner-profile__form--item"],["for","name"],["formControlName","name","type","text","id","name","name","name","required",""],[1,"alert","alert-error"],["for","lastname"],["formControlName","lastname","type","text","id","lastname","name","lastname","required",""],[1,"btn",3,"ngClass","disabled"]],template:function(l,re){l&1&&(u(0,ie,21,10)(1,ne,1,0),F(2,0,H,null,1),w())},dependencies:[L,V],styles:[".conteiner-profile[_ngcontent-%COMP%]{width:clamp(250px,100dvw,1300px);height:50dvh;display:flex;justify-content:center;align-items:center;flex-direction:column;padding:20px 0}.conteiner-profile__title[_ngcontent-%COMP%]{padding:20px 0;font-size:1em;text-align:center}.conteiner-profile__form[_ngcontent-%COMP%], .conteiner-profile__form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center;flex-direction:column;gap:10px}.conteiner-profile__form--item[_ngcontent-%COMP%]{position:relative;width:50%;display:flex;justify-content:center;align-items:flex-start;flex-direction:column;gap:5px}@media screen and (max-width: 700px){.conteiner-profile__form--item[_ngcontent-%COMP%]{width:90%}}.conteiner-profile__form--item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:100%;font-size:1.2em;color:#065693}.conteiner-profile__form--item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#f5f5f5;border:none;outline:none;border-bottom:1px solid #065693;padding:10px 0}.conteiner-profile__form--item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;margin-top:20px}.separator[_ngcontent-%COMP%]{width:98%;height:4px;margin-top:40px;background-color:#065693}@media screen and (max-width: 700px){.separator[_ngcontent-%COMP%]{width:90%}}"]});let e=i;return e})();export{_e as ProfileComponent};
