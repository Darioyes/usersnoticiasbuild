import{b as Y,c as u,d as J,e as K,f as Q,g as N,h as W,i as X,j as Z,l as ee,m as te}from"./chunk-OEDXWUF3.js";import{a as q}from"./chunk-4LWUVTOG.js";import{a as $}from"./chunk-PT246GS5.js";import"./chunk-B4AESGRH.js";import{a as H}from"./chunk-LCOLVQFY.js";import{a as G}from"./chunk-UZIZ2SC3.js";import{a as U}from"./chunk-5AEEOLU3.js";import{a as R}from"./chunk-IFK5JYCE.js";import{b as A,c as V}from"./chunk-OCIR5Z6U.js";import"./chunk-SFNPABOD.js";import"./chunk-RDI242HM.js";import{Aa as P,Bb as L,Ea as r,Oa as b,W as p,Wa as h,Xa as E,Za as I,_ as D,ab as g,db as f,eb as B,fb as C,gb as M,ha as S,hb as a,ia as T,ib as l,jb as m,kb as k,qb as j,rb as _,xb as c,yb as z,za as F,zb as w}from"./chunk-A2AZSFLI.js";var ne=(e,n)=>n.id,ie=()=>[W,Y,J,K,X,Z,import("./chunk-CXOYTFUN.js").then(e=>e.TitlePrincipalComponent),import("./chunk-MWWCK7B6.js").then(e=>e.LoadingButtonComponent)];function oe(e,n){if(e&1&&c(0),e&2){let t,o=_(2);w(" ",(t=o.news())==null||t.data==null||t.data.category_news==null?null:t.data.category_news.name," ")}}function re(e,n){if(e&1&&c(0),e&2){let t,o=_(2);w(" ",(t=o.news())==null||t.data==null||t.data.category_course==null?null:t.data.category_course.name," ")}}function ae(e,n){if(e&1&&(a(0,"div",6)(1,"h3"),c(2),l(),m(3,"img",5),a(4,"p"),c(5),l(),m(6,"p",16),l()),e&2){let t=n.$implicit,o=_(2);r(2),w(" ",t.subtitle," "),r(),g("src",o.urlImage+t.image.replace("public","storage"),P)("alt",t.subtitle),r(2),w(" ",t.entrance," "),r(),g("innerHTML",t.body_news,F)}}function le(e,n){e&1&&(a(0,"p",7),c(1,"No hay articulos"),l())}function ce(e,n){if(e&1&&(a(0,"p"),c(1),l()),e&2){let t=n.$implicit;r(),w(" ",t.comment," ")}}function se(e,n){e&1&&(a(0,"p",10),c(1,"No hay comentarios"),l())}function me(e,n){if(e&1&&(a(0,"span",10),c(1),l()),e&2){let t=n.$implicit;r(),z(t)}}function de(e,n){if(e&1&&C(0,me,2,1,"span",10,B),e&2){let t,o=_(2);M((t=o.errorNews())==null||t.errorNews==null||t.errorNews.errors==null?null:t.errorNews.errors.comment)}}function pe(e,n){e&1&&(a(0,"span",10),c(1,"El comentario es obligatorio"),l())}function _e(e,n){e&1&&(a(0,"span",10),c(1,"El comentario debe tener al menos 5 caracteres"),l())}function ue(e,n){e&1&&(a(0,"span",10),c(1,"El comentario debe tener menos de 500 caracteres"),l())}function ge(e,n){if(e&1&&(a(0,"button",14),c(1,"Enviar"),l()),e&2){let t=_(2);g("disabled",t.commentForm.invalid)}}function fe(e,n){e&1&&(a(0,"button",15),m(1,"app-loading-button"),l())}function we(e,n){if(e&1){let t=k();a(0,"div",0)(1,"div",1)(2,"div",2)(3,"span"),h(4,oe,1,1)(5,re,1,1),l()(),m(6,"app-title-principal",3),a(7,"div",4),m(8,"img",5),a(9,"span"),c(10),l()()(),C(11,ae,7,5,"div",6,ne,!1,le,2,0,"p",7),a(14,"div",8)(15,"span"),c(16,"Comentarios"),l(),m(17,"div"),l(),a(18,"div",9),C(19,ce,2,1,"p",null,ne,!1,se,2,0,"p",10),a(22,"h3"),c(23,"T\xFA comentario sobre la noticia"),l(),a(24,"div")(25,"form",11),j("submit",function(){S(t);let s=_();return T(s.sendComment())}),m(26,"input",12)(27,"textarea",13),h(28,de,2,0)(29,pe,2,0,"span",10)(30,_e,2,0,"span",10)(31,ue,2,0,"span",10)(32,ge,2,1,"button",14)(33,fe,2,0,"button",15),l()()()()}if(e&2){let t,o,s,d,v,y,O,x,i=_();r(4),f(((t=i.news())==null||t.data==null?null:t.data.category_news)!=null?4:5),r(2),g("title",(o=i.news())==null||o.data==null?null:o.data.title),r(2),g("src",i.urlImage+((s=i.news())==null||s.data==null||s.data.image==null?null:s.data.image.replace("public","storage")),P)("alt",(d=i.news())==null||d.data==null?null:d.data.title),r(2),w(" ",(v=i.news())==null||v.data==null?null:v.data.epigraph," "),r(),M((y=i.news())==null||y.data==null?null:y.data.articles),r(8),M((O=i.news())==null||O.data==null?null:O.data.comments),r(6),g("formGroup",i.commentForm),r(3),f(!((x=i.errorNews())==null||x.errorNews==null||x.errorNews.errors==null)&&x.errorNews.errors.comment?28:-1),r(),f(!(i.comment==null||i.comment.errors==null)&&i.comment.errors.required&&(i.comment!=null&&i.comment.touched)?29:-1),r(),f(!(i.comment==null||i.comment.errors==null)&&i.comment.errors.minlength?30:-1),r(),f(!(i.comment==null||i.comment.errors==null)&&i.comment.errors.maxlength?31:-1),r(),f(i.loadingButton?33:32)}}function xe(e,n){e&1&&m(0,"app-spiner")}var Ie=(()=>{let n=class n{constructor(){this.detailNews=p(H),this.route=p($),this.news=b({}),this.urlImage=R.domainimage,this.cookieService=p(G),this.alertsService=p(q),this.meta=p(A),this.title=p(V),this.errorNews=b({}),this.loadingButton=!1,this.formbuilder=p(ee),this.commentForm=new Q({news_id:new N(""),comment:new N("")}),this.commentForm=this.formbuilder.group({news_id:["",u.compose([u.required,u.pattern("^[0-9]+$")])],comment:["",u.compose([u.required,u.minLength(5),u.maxLength(500)])]})}ngOnInit(){this.route.paramMap.subscribe(o=>{this.id=Number(o.get("id")),this.getNewsById(this.id)})}ngOnDestroy(){this.subscriptionNewsDetail.unsubscribe()}get news_id(){return this.commentForm.get("news_id")}get comment(){return this.commentForm.get("comment")}getNewsById(o){this.subscriptionNewsDetail=this.subscriptionNewsDetail=this.detailNews.getNewsById(o).subscribe({next:s=>{this.news.set(s),this.news_id?.setValue(this.id),this.title.setTitle(this.news().data.title+" - NotiCursos"),this.meta.addTags([{name:"description",content:this.news().data.epigraph},{name:"keywords",content:this.news().data.category_news?.name||this.news().data.category_course?.name},{name:"author",content:"NotiCursos"},{property:"og:title",content:this.news().data.title+" - NotiCursos"},{property:"og:description",content:this.news().data.epigraph},{property:"og:type",content:"article"},{property:"og:url",content:`http://www.noticursos.com/detalle-noticia/${this.id}/${this.news().data.slug}`},{property:"og:image",content:this.urlImage+this.news().data.image?.replace("public","storage")}])},error:s=>{}})}sendComment(){if(this.loadingButton=!0,this.cookieService.get("token"))if(this.commentForm.valid){let s=this.cookieService.get("name");this.detailNews.postComment(this.commentForm.value).subscribe({next:d=>{this.getNewsById(this.id),this.commentForm.reset(),this.loadingButton=!1},error:d=>{this.errorNews.set(d),d?.message.message==="Your email address is not verified."&&this.alertsService.showAlert("error",s+' Su correo no esta verificado. Por favor valide <a href="#" class="verificationLink" >Aqu\xED</a>'),this.loadingButton=!1}})}else this.alertsService.showAlert("error","Debes escribir un comentario"),this.loadingButton=!1;else this.alertsService.showAlert("error","Debes iniciar sesi\xF3n para comentar"),this.loadingButton=!1}};n.\u0275fac=function(s){return new(s||n)},n.\u0275cmp=D({type:n,selectors:[["app-news-detail"]],standalone:!0,features:[L],decls:4,vars:0,consts:[[1,"conteiner-detail"],[1,"conteiner-detail__news"],[1,"conteiner-detail__news--category"],[3,"title"],[1,"conteiner-detail__news--image"],[3,"src","alt"],[1,"conteiner-detail__article"],[1,"alert","alert-danger"],[1,"conteiner-detail__separator"],[1,"conteiner-detail__commets"],[1,"alert","alert-error"],[3,"submit","formGroup"],["formControlName","news_id","type","hidden","name","news_id"],["formControlName","comment","name","comment","id","comment","placeholder","Recuerda iniciar sesi\xF3n para poder comentar"],[1,"btn",3,"disabled"],[1,"btn"],[3,"innerHTML"]],template:function(s,d){s&1&&(h(0,we,34,13)(1,xe,1,0),E(2,0,ie,null,1),I())},dependencies:[te,U],styles:[".conteiner-detail[_ngcontent-%COMP%]{width:clamp(250px,100dvw,1300px);display:flex;justify-content:center;align-items:center;flex-direction:column;background:#f5f5f5;font-size:clamp(12px,2dvw,16px);padding:0;margin:0;gap:20px}@media screen and (max-width: 700px){.conteiner-detail[_ngcontent-%COMP%]{width:100%}}.conteiner-detail__news[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center;flex-direction:column;gap:10px}.conteiner-detail__news--category[_ngcontent-%COMP%]{width:100%;background-color:#065693;display:flex;justify-content:flex-start;align-items:center;border-radius:3px}.conteiner-detail__news--category[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Libre Bodoni-SemiBoldItalic;color:#fff;padding:7px;font-weight:300;letter-spacing:2px;font-size:1.3rem}.conteiner-detail__news--image[_ngcontent-%COMP%]{background:#e2e2e2;width:90%;display:flex;justify-content:center;align-items:center;flex-direction:column}.conteiner-detail__news--image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-height:600px;object-fit:cover;object-position:center;background-repeat:no-repeat}@media screen and (max-width: 700px){.conteiner-detail__news--image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto}}.conteiner-detail__news--image[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.2em;font-weight:100;padding:20px 30px}@media screen and (max-width: 700px){.conteiner-detail__news--image[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:10px}}.conteiner-detail__article[_ngcontent-%COMP%]{width:70%;display:flex;justify-content:center;align-items:center;flex-direction:column;gap:5px}@media screen and (max-width: 700px){.conteiner-detail__article[_ngcontent-%COMP%]{width:90%}}.conteiner-detail__article[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{width:100%;font-size:1.5em;font-weight:100;text-align:justify;margin:15px 0 0}.conteiner-detail__article[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]:first-letter{font-family:Libre Bodoni-SemiBoldItalic;font-size:2em;-webkit-initial-letter:3 2;initial-letter:3 2;color:#065693;padding-right:3px}.conteiner-detail__article[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:70%}@media screen and (max-width: 700px){.conteiner-detail__article[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:85%}}.conteiner-detail__article[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:90%;font-size:1.3em;font-weight:100}@media screen and (max-width: 700px){.conteiner-detail__article[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:100%}}.conteiner-detail__separator[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center;flex-direction:row;margin:5px 0}.conteiner-detail__separator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Libre Bodoni-Regular;background:#065693;width:170px;height:30px;display:grid;place-items:center;color:#065693;font-size:1.2em;text-align:center;color:#fff;border-radius:5px}@media screen and (max-width: 700px){.conteiner-detail__separator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:100px}}.conteiner-detail__separator[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:calc(100% - 170px);height:2px;background-color:#065693;margin-left:7px;border-radius:20px}.conteiner-detail__commets[_ngcontent-%COMP%]{width:70%;display:flex;justify-content:center;align-items:center;flex-direction:column;gap:5px}@media screen and (max-width: 700px){.conteiner-detail__commets[_ngcontent-%COMP%]{width:90%}}.conteiner-detail__commets[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{width:90%;font-size:2.5em;font-weight:700;margin:15px 0 0;color:#065693;text-align:center;padding-bottom:10px}@media screen and (max-width: 700px){.conteiner-detail__commets[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{width:90%}}.conteiner-detail__commets[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:90%;font-size:1.3em;font-weight:100;color:#646464;border-bottom:1px solid #dddddd}.conteiner-detail__commets[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:80%;display:flex;justify-content:center;padding-bottom:10px}@media screen and (max-width: 700px){.conteiner-detail__commets[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:90%}}.conteiner-detail__commets[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center;flex-direction:column;gap:10px}.conteiner-detail__commets[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;height:120px;resize:none;padding:10px;border:1px solid #065693;outline:none}@media screen and (max-width: 700px){.conteiner-detail__commets[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%}}"]});let e=n;return e})();export{Ie as NewsDetailComponent};
