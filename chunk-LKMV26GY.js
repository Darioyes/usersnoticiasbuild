import{b as B,c as h,d as A,e as I,f as q,g as C,h as G,i as j,j as z,k as L,l as U,m as $}from"./chunk-OEDXWUF3.js";import{a as N}from"./chunk-T3JMRARM.js";import{a as O}from"./chunk-4LWUVTOG.js";import{a as M,c as E}from"./chunk-PT246GS5.js";import"./chunk-UZIZ2SC3.js";import{a as V}from"./chunk-5AEEOLU3.js";import"./chunk-IFK5JYCE.js";import"./chunk-OCIR5Z6U.js";import"./chunk-SFNPABOD.js";import"./chunk-RDI242HM.js";import{Bb as R,Ea as a,Oa as b,W as _,Wa as m,Xa as S,Za as k,_ as P,ab as g,db as d,eb as T,fb as y,gb as F,ha as u,hb as n,ia as f,ib as r,jb as l,kb as w,qb as v,rb as c,sb as x,xb as p,yb as D}from"./chunk-A2AZSFLI.js";var H=()=>[G,B,A,I,L,j,z,import("./chunk-CXOYTFUN.js").then(e=>e.TitlePrincipalComponent),import("./chunk-MWWCK7B6.js").then(e=>e.LoadingButtonComponent)];function J(e,o){e&1&&(n(0,"p",9),p(1,"El correo es obligatorio"),r())}function K(e,o){e&1&&(n(0,"p",9),p(1,"Debe ser un correo valido"),r())}function Q(e,o){if(e&1&&(n(0,"p",9),p(1),r()),e&2){let t=o.$implicit;a(),D(t)}}function W(e,o){if(e&1&&y(0,Q,2,1,"p",9,T),e&2){let t,s=c(3);F((t=s.errorNews().errors)==null?null:t.password)}}function X(e,o){if(e&1){let t=w();n(0,"i",19),v("click",function(){u(t);let i=c(3);return f(i.showPassword())}),r()}}function Y(e,o){if(e&1){let t=w();n(0,"i",20),v("click",function(){u(t);let i=c(3);return f(i.showPassword())}),r()}}function Z(e,o){if(e&1){let t=w();n(0,"i",19),v("click",function(){u(t);let i=c(3);return f(i.showConfirmationPassword())}),r()}}function ee(e,o){if(e&1){let t=w();n(0,"i",20),v("click",function(){u(t);let i=c(3);return f(i.showConfirmationPassword())}),r()}}function te(e,o){if(e&1&&(n(0,"div",5)(1,"label",13),p(2,"Contrase\xF1a *"),r(),l(3,"input",14),m(4,W,2,0),n(5,"div"),m(6,X,1,0,"i",15)(7,Y,1,0,"i",16),r()(),n(8,"div",5)(9,"label",17),p(10,"Confirme contrase\xF1a *"),r(),l(11,"input",18),n(12,"div"),m(13,Z,1,0,"i",15)(14,ee,1,0,"i",16),r()()),e&2){let t,s=c(2);a(3),x("type",s.viewPassword?"text":"password"),a(),d((t=s.errorNews().errors)!=null&&t.password?4:-1),a(2),d(s.viewPassword?6:7),a(5),x("type",s.viewConfirmationPassword?"text":"password"),a(2),d(s.viewConfirmationPassword?13:14)}}function ie(e,o){if(e&1&&(n(0,"button",11),p(1,"Ingresar"),r()),e&2){let t=c(2);g("disabled",t.recoverForm.invalid)}}function oe(e,o){e&1&&(n(0,"button",12),l(1,"app-loading-button"),r())}function ne(e,o){if(e&1){let t=w();l(0,"div",1),n(1,"div",2),l(2,"app-title-principal",3),r(),n(3,"form",4),v("submit",function(){u(t);let i=c();return f(i.recoverPassword())}),n(4,"div",5),l(5,"input",6),r(),n(6,"div",5)(7,"label",7),p(8,"Ingrese su correo *"),r(),l(9,"input",8),m(10,J,2,0,"p",9)(11,K,2,0,"p",9),r(),m(12,te,15,5),n(13,"div",10),m(14,ie,2,1,"button",11)(15,oe,2,0,"button",12),r()(),l(16,"div",1)}if(e&2){let t=c();a(3),g("formGroup",t.recoverForm),a(2),g("value",t.urlToken),a(5),d(!(t.email==null||t.email.errors==null)&&t.email.errors.required&&(t.email!=null&&t.email.touched)?10:-1),a(),d(!(t.email==null||t.email.errors==null)&&t.email.errors.email?11:-1),a(),d(t.urlToken?12:-1),a(2),d(t.loadingButton?15:14)}}function re(e,o){e&1&&l(0,"app-spiner")(1,"div",1)}var we=(()=>{let o=class o{constructor(){this.recoverForm=new q({token:new C(""),email:new C(""),password:new C(""),password_confirmation:new C("")}),this.viewPassword=!1,this.urlToken=null,this.loadingButton=!1,this.errorNews=b({}),this.formbuilder=_(U),this.activatedRoute=_(M),this.userService=_(N),this.alertsService=_(O),this.router=_(E),this.viewConfirmationPassword=!1,this.recoverForm=this.formbuilder.group({token:[""],email:["",h.compose([h.required,h.email])],password:[""],password_confirmation:[""]})}ngOnInit(){this.getTokenEmail()}ngOnDestroy(){this.unsubscribe&&this.unsubscribe?.unsubscribe()}get token(){return this.recoverForm.get("token")}get email(){return this.recoverForm.get("email")}get password(){return this.recoverForm.get("password")}get password_confirmation(){return this.recoverForm.get("password_confirmation")}showPassword(){this.viewPassword=!this.viewPassword}showConfirmationPassword(){this.viewConfirmationPassword=!this.viewConfirmationPassword}getTokenEmail(){this.urlToken=this.activatedRoute.snapshot.paramMap.get("token"),this.urlToken&&this.recoverForm.get("token")?.setValue(this.urlToken)}recoverPassword(){if(this.loadingButton=!0,this.recoverForm.valid)if(this.urlToken){let s=this.recoverForm.value;this.unsubscribe=this.userService.setPassword(s).subscribe({next:i=>{this.alertsService.showAlert("success",i.message),this.loadingButton=!1,this.router.navigate(["/"]),this.recoverForm.reset()},error:i=>{this.errorNews.set(i.errorNews),this.loadingButton=!1,this.errorNews().error&&this.alertsService.showAlert("error",this.errorNews().error)}})}else{let s=this.recoverForm.get("email")?.value;this.unsubscribe=this.userService.sendMailPassword(s).subscribe({next:i=>{this.alertsService.showAlert("success",i.message),this.loadingButton=!1,this.router.navigate(["/"]),this.recoverForm.reset()},error:i=>{i.errorNews.email?this.alertsService.showAlert("error",i.errorNews.email):this.alertsService.showAlert("error",i.errorNews.errors.email),this.loadingButton=!1}})}else this.loadingButton=!1,this.alertsService.showAlert("error","Por favor completa todos los campos requeridos.")}};o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=P({type:o,selectors:[["app-recover-password"]],standalone:!0,features:[R],decls:5,vars:0,consts:[[1,"conteiner-login"],[1,"separator"],[1,"conteiner-login__title"],["title","Noticursos Recuperar contrase\xF1a"],[1,"conteiner-login__form",3,"submit","formGroup"],[1,"conteiner-login__form--item"],["formControlName","token","type","hidden","name","token","id","token",3,"value"],["for","email"],["formControlName","email","type","email","name","email","id","email","autocomplete","email","required",""],[1,"alert","alert-error"],[1,"conteiner-login__form--item","center"],[1,"btn",3,"disabled"],[1,"btn"],["for","password"],["formControlName","password","name","password","id","password","autocomplete","current-password",3,"type"],[1,"fa-solid","fa-eye"],[1,"fa-solid","fa-eye-slash"],["for","password_confirmation"],["formControlName","password_confirmation","name","password_confirmation","id","password_confirmation","autocomplete","current-password",3,"type"],[1,"fa-solid","fa-eye",3,"click"],[1,"fa-solid","fa-eye-slash",3,"click"]],template:function(i,se){i&1&&(n(0,"div",0),m(1,ne,17,6)(2,re,2,0),S(3,1,H,null,2),k(),r())},dependencies:[$,V],styles:[".conteiner-login[_ngcontent-%COMP%]{width:clamp(250px,100dvw,1300px);display:flex;justify-content:center;align-items:center;flex-direction:column;padding:30px 15px;font-size:clamp(12px,2dvw,16px);gap:20px}.conteiner-login__form[_ngcontent-%COMP%]{position:relative;width:100%;display:flex;justify-content:center;align-items:center;flex-direction:column;gap:10px}.conteiner-login__form--item[_ngcontent-%COMP%]{position:relative;width:50%;display:flex;justify-content:center;align-items:flex-start;flex-direction:column;gap:5px}@media screen and (max-width: 700px){.conteiner-login__form--item[_ngcontent-%COMP%]{width:90%}}.conteiner-login__form--item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:1.2em;color:#065693}.conteiner-login__form--item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#f5f5f5;border:none;outline:none;border-bottom:1px solid #065693;padding:10px 0}.conteiner-login__form--item[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:relative;width:100%}.conteiner-login__form--item[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;right:10px;top:-35px;color:#065693;font-size:1.1em}.conteiner-login__form--item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:1.1em;color:#065693;font-weight:700;letter-spacing:2px;text-decoration:underline;padding:10px}.conteiner-login__form[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{display:grid;place-items:center;padding-top:10px}.separator[_ngcontent-%COMP%]{width:98%;height:4px;margin-top:40px;background-color:#065693}@media screen and (max-width: 700px){.separator[_ngcontent-%COMP%]{width:90%}}"]});let e=o;return e})();export{we as RecoverPasswordComponent};
