import{a as U,b as q,c as m,d as A,e as j,f as B,g as u,h as z,i as $,j as G,l as L,m as Y}from"./chunk-OEDXWUF3.js";import{a as N}from"./chunk-T3JMRARM.js";import{a as V}from"./chunk-4LWUVTOG.js";import{c as R}from"./chunk-PT246GS5.js";import"./chunk-B4AESGRH.js";import{a as F}from"./chunk-UZIZ2SC3.js";import{a as I}from"./chunk-5AEEOLU3.js";import"./chunk-IFK5JYCE.js";import"./chunk-OCIR5Z6U.js";import"./chunk-SFNPABOD.js";import"./chunk-RDI242HM.js";import{Bb as T,Ea as l,Oa as k,W as f,Wa as p,Xa as D,Za as O,_ as y,ab as M,db as c,eb as x,fb as w,gb as h,ha as g,hb as r,ia as C,ib as n,jb as _,kb as v,qb as b,rb as d,sb as E,xb as s,yb as S}from"./chunk-A2AZSFLI.js";var H=()=>[import("./chunk-CXOYTFUN.js").then(t=>t.TitlePrincipalComponent),z,q,U,A,j,$,G];function J(t,i){t&1&&(r(0,"p",8),s(1,"El nombre es obligatorio"),n())}function K(t,i){if(t&1&&(r(0,"p",8),s(1),n()),t&2){let e=i.$implicit;l(),S(e)}}function Q(t,i){if(t&1&&w(0,K,2,1,"p",8,x),t&2){let e,o=d(2);h((e=o.errorUser().errorNews)==null||e.errors==null?null:e.errors.name)}}function W(t,i){t&1&&(r(0,"p",8),s(1,"El apellido es obligatorio"),n())}function X(t,i){if(t&1&&(r(0,"p",8),s(1),n()),t&2){let e=i.$implicit;l(),S(e)}}function Z(t,i){if(t&1&&w(0,X,2,1,"p",8,x),t&2){let e,o=d(2);h((e=o.errorUser().errorNews)==null||e.errors==null?null:e.errors.lastname)}}function ee(t,i){t&1&&(r(0,"p",8),s(1,"El correo es obligatorio"),n())}function te(t,i){t&1&&(r(0,"p",8),s(1,"Debe ser un correo valido"),n())}function ne(t,i){if(t&1&&(r(0,"p",8),s(1),n()),t&2){let e=i.$implicit;l(),S(e)}}function ie(t,i){if(t&1&&w(0,ne,2,1,"p",8,x),t&2){let e,o=d(2);h((e=o.errorUser().errorNews)==null||e.errors==null?null:e.errors.email)}}function re(t,i){if(t&1){let e=v();r(0,"i",24),b("click",function(){g(e);let a=d(2);return C(a.showPassword())}),n()}}function oe(t,i){if(t&1){let e=v();r(0,"i",25),b("click",function(){g(e);let a=d(2);return C(a.showPassword())}),n()}}function le(t,i){t&1&&(r(0,"p",8),s(1,"La contrase\xF1a es obligatoria"),n())}function ae(t,i){if(t&1&&(r(0,"p",8),s(1),n()),t&2){let e=i.$implicit;l(),S(e)}}function se(t,i){if(t&1&&w(0,ae,2,1,"p",8,x),t&2){let e,o=d(2);h((e=o.errorUser().errorNews)==null||e.errors==null?null:e.errors.password)}}function ce(t,i){if(t&1){let e=v();r(0,"i",24),b("click",function(){g(e);let a=d(2);return C(a.showConfirmationPassword())}),n()}}function me(t,i){if(t&1){let e=v();r(0,"i",25),b("click",function(){g(e);let a=d(2);return C(a.showConfirmationPassword())}),n()}}function de(t,i){t&1&&(r(0,"p",8),s(1,"Debe confirmar la contrase\xF1a"),n())}function pe(t,i){if(t&1&&(r(0,"p",8),s(1),n()),t&2){let e=i.$implicit;l(),S(e)}}function _e(t,i){if(t&1&&w(0,pe,2,1,"p",8,x),t&2){let e,o=d(2);h((e=o.errorUser().errorNews)==null||e.errors==null?null:e.errors.terms)}}function ue(t,i){t&1&&(r(0,"p",8),s(1,"Debe aceptar los t\xE9rminos y condiciones"),n())}function fe(t,i){if(t&1){let e=v();_(0,"div",1),r(1,"div",2),_(2,"app-title-principal",3),n(),r(3,"form",4),b("submit",function(){g(e);let a=d();return C(a.register())}),r(4,"div",5)(5,"label",6),s(6,"Nombre *"),n(),_(7,"input",7),p(8,J,2,0,"p",8)(9,Q,2,0),n(),r(10,"div",5)(11,"label",9),s(12,"Apellido *"),n(),_(13,"input",10),p(14,W,2,0,"p",8)(15,Z,2,0),n(),r(16,"div",5)(17,"label",11),s(18,"Correo *"),n(),_(19,"input",12),p(20,ee,2,0,"p",8)(21,te,2,0,"p",8)(22,ie,2,0),n(),r(23,"div",5)(24,"label",13),s(25,"Contrase\xF1a *"),n(),_(26,"input",14),r(27,"div"),p(28,re,1,0,"i",15)(29,oe,1,0,"i",16),n(),p(30,le,2,0,"p",8)(31,se,2,0),n(),r(32,"div",5)(33,"label",17),s(34,"Confirme contrase\xF1a *"),n(),_(35,"input",18),r(36,"div"),p(37,ce,1,0,"i",15)(38,me,1,0,"i",16),n(),p(39,de,2,0,"p",8),n(),r(40,"div",19)(41,"label",20),s(42,"Acepto pol\xEDticas, t\xE9rminos y condiciones *"),n(),r(43,"div"),_(44,"input",21),n(),p(45,_e,2,0),n(),p(46,ue,2,0,"p",8),r(47,"div",22)(48,"button",23),s(49,"Registrarse"),n()()(),_(50,"div",1)}if(t&2){let e=d();l(3),M("formGroup",e.registerForm),l(5),c(!(e.name==null||e.name.errors==null)&&e.name.errors.required&&(e.name!=null&&e.name.touched)?8:-1),l(),c(e.errorUser()?9:-1),l(5),c(!(e.lastname==null||e.lastname.errors==null)&&e.lastname.errors.required&&(e.lastname!=null&&e.lastname.touched)?14:-1),l(),c(e.errorUser()?15:-1),l(5),c(!(e.email==null||e.email.errors==null)&&e.email.errors.required&&(e.email!=null&&e.email.touched)?20:-1),l(),c(!(e.email==null||e.email.errors==null)&&e.email.errors.email?21:-1),l(),c(e.errorUser()?22:-1),l(4),E("type",e.viewPassword?"text":"password"),l(2),c(e.viewPassword?28:29),l(2),c(!(e.password==null||e.password.errors==null)&&e.password.errors.required&&(e.password!=null&&e.password.touched)?30:-1),l(),c(e.errorUser()?31:-1),l(4),E("type",e.viewConfirmationPassword?"text":"password"),l(2),c(e.viewConfirmationPassword?37:38),l(2),c(e.password_confirmation!=null&&e.password_confirmation.errors&&(e.password_confirmation!=null&&e.password_confirmation.touched)?39:-1),l(6),c(e.errorUser()?45:-1),l(),c(!(e.terms==null||e.terms.errors==null)&&e.terms.errors.required&&(e.terms!=null&&e.terms.touched)?46:-1),l(2),M("disabled",e.registerForm.invalid)}}function ge(t,i){t&1&&_(0,"app-spiner")(1,"div",1)}var Oe=(()=>{let i=class i{constructor(){this.registerForm=new B({name:new u(""),lastname:new u(""),email:new u(""),password:new u(""),password_confirmation:new u(""),terms:new u(!1)}),this.viewPassword=!1,this.viewConfirmationPassword=!1,this.errorUser=k({}),this.formbuilder=f(L),this.router=f(R),this.userService=f(N),this.alertsService=f(V),this.cookieService=f(F)}ngOnInit(){this.registerForm=this.formbuilder.group({name:["",m.compose([m.required])],lastname:["",m.compose([m.required])],email:["",m.compose([m.required,m.email])],password:["",m.compose([m.required])],password_confirmation:["",m.compose([m.required])],terms:[!1,m.requiredTrue]},{validators:this.passwordMatch})}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.unsubscribe(),this.unsubscribeMail&&this.unsubscribeMail.unsubscribe()}get name(){return this.registerForm.get("name")}get lastname(){return this.registerForm.get("lastname")}get email(){return this.registerForm.get("email")}get password(){return this.registerForm.get("password")}get password_confirmation(){return this.registerForm.get("password_confirmation")}get terms(){return this.registerForm.get("terms")}passwordMatch(o){let a=o.get("password")?.value,P=o.get("password_confirmation")?.value;return a===P?null:{passwordNotMatch:!0}}showPassword(){this.viewPassword=!this.viewPassword}showConfirmationPassword(){this.viewConfirmationPassword=!this.viewConfirmationPassword}register(){this.cookieService.check("token")?this.alertsService.showAlert("error","Ya hay una sesi\xF3n activa"):this.registerForm.valid&&(this.unsubscribe=this.userService.register(this.registerForm.value).subscribe({next:o=>{let a=new Date;a.setDate(a.getDate()+30),this.cookieService.set("token",o.noti_token,a,"/",void 0,!0,"Strict"),this.cookieService.set("id",o.data.id,a,"/",void 0,!0,"Strict"),this.cookieService.set("name",o.data.name,a,"/",void 0,!0,"Strict"),this.cookieService.set("lastname",o.data.lastname,a,"/",void 0,!0,"Strict"),this.cookieService.set("success",o.response,a,"/",void 0,!0,"Strict"),this.unsubscribeMail=this.userService.sendEmailVerification().subscribe({next:P=>{this.alertsService.showAlert("info","Usuario registrado con \xE9xito. Se ha enviado un correo de verificaci\xF3n a su direcci\xF3n de correo electr\xF3nico.")},error:P=>{}}),this.router.navigate(["/"])},error:o=>{this.errorUser.set(o)}}))}};i.\u0275fac=function(a){return new(a||i)},i.\u0275cmp=y({type:i,selectors:[["app-register"]],standalone:!0,features:[T],decls:5,vars:0,consts:[[1,"conteiner-login"],[1,"separator"],[1,"conteiner-login__title"],["title","Noticursos Registro"],[1,"conteiner-login__form",3,"submit","formGroup"],[1,"conteiner-login__form--item"],["for","name"],["formControlName","name","type","text","name","name","id","name","autocomplete","name"],[1,"alert","alert-error"],["for","lastname"],["formControlName","lastname","type","text","name","lastname","id","lastname","autocomplete","lastname"],["for","email"],["formControlName","email","type","email","name","email","id","email","autocomplete","email"],["for","password","title","1Mayuscula, 1 Minuscula, 1 n\xFAmero"],["title","1Mayuscula, 1 Minuscula, 1 n\xFAmero","formControlName","password","name","password","id","password","autocomplete","current-password",3,"type"],[1,"fa-solid","fa-eye"],[1,"fa-solid","fa-eye-slash"],["for","password_confirmation"],["formControlName","password_confirmation","name","password_confirmation","id","password_confirmation","autocomplete","current-password",3,"type"],[1,"check"],["for","terms"],["formControlName","terms","type","checkbox","name","terms","id","terms"],[1,"conteiner-login__form--item","center"],[1,"btn",3,"disabled"],[1,"fa-solid","fa-eye",3,"click"],[1,"fa-solid","fa-eye-slash",3,"click"]],template:function(a,P){a&1&&(r(0,"div",0),p(1,fe,51,18)(2,ge,2,0),D(3,1,H,null,2),O(),n())},dependencies:[Y,I],styles:[".conteiner-login[_ngcontent-%COMP%]{width:clamp(250px,100dvw,1300px);display:flex;justify-content:center;align-items:center;flex-direction:column;padding:30px 15px;font-size:clamp(12px,2dvw,16px);gap:20px}.conteiner-login__title[_ngcontent-%COMP%]{padding-bottom:30px}.conteiner-login__form[_ngcontent-%COMP%]{position:relative;width:100%;display:flex;justify-content:center;align-items:center;flex-direction:column;gap:10px}.conteiner-login__form--item[_ngcontent-%COMP%]{position:relative;width:50%;display:flex;justify-content:center;align-items:flex-start;flex-direction:column;gap:5px}@media screen and (max-width: 700px){.conteiner-login__form--item[_ngcontent-%COMP%]{width:90%}}.conteiner-login__form--item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:1.2em;color:#065693}.conteiner-login__form--item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#f5f5f5;border:none;outline:none;border-bottom:1px solid #065693;padding:10px 0}.conteiner-login__form--item[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:relative;width:100%}.conteiner-login__form--item[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;right:10px;top:-35px;color:#065693;font-size:1.1em}.conteiner-login__form--item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:1.1em;color:#065693;font-weight:700;letter-spacing:2px;text-decoration:underline;padding:10px}.conteiner-login__form[_ngcontent-%COMP%]   .check[_ngcontent-%COMP%]{padding:20px 0;width:50%;display:flex;justify-content:space-between;align-items:center;flex-direction:row}.conteiner-login__form[_ngcontent-%COMP%]   .check[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:1.2em;color:#065693;cursor:pointer}.conteiner-login__form[_ngcontent-%COMP%]   .check[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:30%;display:flex;justify-content:left;align-items:center;padding-left:8px}.conteiner-login__form[_ngcontent-%COMP%]   .check[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:25px;height:25px;background:#065693;border:none;outline:none;border:1px solid #065693;cursor:pointer}.conteiner-login__form[_ngcontent-%COMP%]   .check[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked{background:#065693}.conteiner-login__form[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{display:grid;place-items:center;padding-top:10px}.separator[_ngcontent-%COMP%]{width:98%;height:4px;margin-top:40px;background-color:#065693}@media screen and (max-width: 700px){.separator[_ngcontent-%COMP%]{width:90%}}"]});let t=i;return t})();export{Oe as RegisterComponent};
